package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class Ventas_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("\n");
      out.write("<html xmlns=\"http://www.w3.org/1999/xhtml\">\n");
      out.write("<head>\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n");
      out.write("<title>Documento sin t√≠tulo</title>\n");
      out.write("    <style>\n");
      out.write("        td{font-family: Arial;            \n");
      out.write("        font-size: 12px}\n");
      out.write("        input{font-family: Arial;            \n");
      out.write("        font-size: 12px}\n");
      out.write("        select{font-family: Arial;            \n");
      out.write("        font-size: 11px}\n");
      out.write("        option{font-family: Arial;            \n");
      out.write("        font-size: 11px}\n");
      out.write("    </style>\n");
      out.write("    <script src=\"js/jquery-1.8.3.min.js\" type=\"text/javascript\"></script>\n");
      out.write("    <link href=\"css/jquery-ui-1.9.2.custom.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n");
      out.write("    <script src=\"js/jquery-ui-1.9.1.custom.min.js\" type=\"text/javascript\"></script>\n");
      out.write("    <script language=\"javascript\" type=\"text/javascript\" src=\"js/jquery.blockUI.js\"></script>    \n");
      out.write("    <script language=\"javascript\" type=\"text/javascript\" src=\"js/func_comunes.js\"></script>    \n");
      out.write("        \n");
      out.write("    <script type=\"text/javascript\">\n");
      out.write("                \n");
      out.write("        $(document).ready(function(){                      \n");
      out.write("            $.blockUI( { message: \"Cargando\"} );    \n");
      out.write("            \n");
      out.write("            document.getElementById('txtsubtotal').value = 0;\n");
      out.write("            document.getElementById('txtigv').value = 0;\n");
      out.write("            document.getElementById('txttotal').value = 0;\n");
      out.write("                \n");
      out.write("            $.ajax({\n");
      out.write("            type :'GET',\n");
      out.write("            url :'EmpleadoC?action=CargarCombo',\n");
      out.write("            headers : {\n");
      out.write("                Accept : \"application/json; charset=utf-8\", \"Content-Type\" : \"application/json; charset=utf-8\"\n");
      out.write("            },\n");
      out.write("            success : function(result){             \n");
      out.write("                var listaempleado = $.parseJSON(result); \n");
      out.write("                var option = '';\n");
      out.write("                for (var i = 0; i < listaempleado.length; i++){                    \n");
      out.write("                    option = option + '<option value =' + listaempleado[i].idempleado + '>' + listaempleado[i].nombre + ' ' + listaempleado[i].apellidos + '</option>';                                                             \n");
      out.write("                }                \n");
      out.write("                $('#cboempleado').html(option).fadeIn();\n");
      out.write("            }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            $.ajax({\n");
      out.write("            type :'GET',\n");
      out.write("            url :'ClienteC?action=CargarCliente',\n");
      out.write("            headers : {\n");
      out.write("                Accept : \"application/json; charset=utf-8\", \"Content-Type\" : \"application/json; charset=utf-8\"\n");
      out.write("            },\n");
      out.write("            success : function(result){             \n");
      out.write("                var listaclientes = $.parseJSON(result); \n");
      out.write("                var option = '';\n");
      out.write("                for (var i = 0; i < listaclientes.length; i++){                    \n");
      out.write("                    option = option + '<option value =' + listaclientes[i].idcliente + '>' + listaclientes[i].nombre + '</option>';                                                             \n");
      out.write("                }                \n");
      out.write("                $('#cbocliente').html(option).fadeIn();\n");
      out.write("            }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            $.ajax({\n");
      out.write("            type :'GET',\n");
      out.write("            url :'ProductosC?action=CargarProductos',\n");
      out.write("            headers : {\n");
      out.write("                Accept : \"application/json; charset=utf-8\", \"Content-Type\" : \"application/json; charset=utf-8\"\n");
      out.write("            },\n");
      out.write("            success : function(result){         \n");
      out.write("                \n");
      out.write("                var listaproductos = $.parseJSON(result); \n");
      out.write("                var option = '<option value =' + '0' + '>' + '--Seleccione--' + '</option>':\n");
      out.write("                for (var i = 0; i < listaproductos.length; i++){   \n");
      out.write("                    \n");
      out.write("                    option = option + '<option value =' + listaproductos[i].idproducto + '>' + listaproductos[i].descripcion + '</option>';                                                             \n");
      out.write("                }                \n");
      out.write("                $('#cboproducto').html(option).fadeIn();\n");
      out.write("            }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            $.unblockUI();\n");
      out.write("            \n");
      out.write("            $(\"#cboproducto\").change( function(){\n");
      out.write("                top.$.blockUI( { message: \"Cargando\"} );\n");
      out.write("                $.ajax({\n");
      out.write("                type :'GET',\n");
      out.write("                url :'ProductosC?idproducto=' + document.getElementById('cboproducto').value + '&action=BuscarProducto',\n");
      out.write("                headers : {\n");
      out.write("                    Accept : \"application/json; charset=utf-8\", \"Content-Type\" : \"application/json; charset=utf-8\"\n");
      out.write("                },\n");
      out.write("                success : function(result){ \n");
      out.write("                \n");
      out.write("                var productos = $.parseJSON(result); \n");
      out.write("                document.getElementById('txtcodigo').value = productos.idproducto;\n");
      out.write("                document.getElementById('txtprecio').value = productos.precioventa;\n");
      out.write("                document.getElementById('txtcantidad').value = '1';\n");
      out.write("                document.getElementById('txtimporte').value = productos.precioventa;\n");
      out.write("                            \n");
      out.write("                top.$.unblockUI();                \n");
      out.write("                \n");
      out.write("                }\n");
      out.write("                });\n");
      out.write("\n");
      out.write("            });  \n");
      out.write("            \n");
      out.write("            $(\"#btnagregar\").click( function(){\n");
      out.write("                \n");
      out.write("                top.$.blockUI( { message: \"Cargando\"} );\n");
      out.write("                var tr='';\n");
      out.write("                tr=tr + '<tr><td>' + document.getElementById('txtcodigo').value + '</td><td>' + $(\"#cboproducto option:selected\").html() + '</td><td>' + document.getElementById('txtprecio').value + '</td><td>' + document.getElementById('txtcantidad').value + '</td><td>' + document.getElementById('txtimporte').value + '</td></tr>';\n");
      out.write("                $('#idtabdetalle tr:last').after(tr).fadeIn();\n");
      out.write("                \n");
      out.write("                var subtotal,igv,total;\n");
      out.write("                subtotal = parseFloat(document.getElementById('txtsubtotal').value) + parseFloat(document.getElementById('txtimporte').value);\n");
      out.write("                igv = subtotal * 0.18;\n");
      out.write("                total =   subtotal + igv;  \n");
      out.write("                \n");
      out.write("                document.getElementById('txtsubtotal').value = parseFloat(subtotal).toFixed(2);\n");
      out.write("                document.getElementById('txtigv').value = parseFloat(igv).toFixed(2);\n");
      out.write("                document.getElementById('txttotal').value = parseFloat(total).toFixed(2);\n");
      out.write("                \n");
      out.write("                top.$.unblockUI();\n");
      out.write("                \n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            $(\"#txtcantidad\").keyup(function() {\n");
      out.write("                $(\"#txtimporte\" ).val($(\"#txtcantidad\" ).val() * parseFloat($(\"#txtprecio\" ).val()).toFixed(2));\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            $(\"#btnregistrar\").click( function(){\n");
      out.write("                \n");
      out.write("                top.$.blockUI( { message: \"Cargando\"} );\n");
      out.write("                \n");
      out.write("                var table = document.getElementById(\"idtabdetalle\");                \n");
      out.write("                var jsonventaconc='';\n");
      out.write("                var idproducto, nombre,precio,cantidad,importe;\n");
      out.write("                \n");
      out.write("                for (var i=1;i < table.rows.length ; i++){\n");
      out.write("                        \n");
      out.write("                    idproducto =  table.rows[i].cells[0].innerHTML;\n");
      out.write("                    nombre =  table.rows[i].cells[1].innerHTML;\n");
      out.write("                    precio =  table.rows[i].cells[2].innerHTML;\n");
      out.write("                    cantidad =  table.rows[i].cells[3].innerHTML;\n");
      out.write("                    importe =  table.rows[i].cells[4].innerHTML;\n");
      out.write("                    \n");
      out.write("                    if ((table.rows.length-1) == i ){\n");
      out.write("                    jsonventaconc = jsonventaconc + '{\"idproducto\":\"' + idproducto + '\",\"nombre\":\"' + nombre + '\",\"precio\":' + precio + ',\"cantidad\":' + cantidad + ',\"importe\":' + importe + '}';                    \n");
      out.write("                    }else {jsonventaconc = jsonventaconc + '{\"idproducto\":\"' + idproducto + '\",\"nombre\":\"' + nombre + '\",\"precio\":' + precio + ',\"cantidad\":' + cantidad + ',\"importe\":' + importe + '},';}\n");
      out.write("                   \n");
      out.write("                }         \n");
      out.write("                var obj = '['+jsonventaconc+']';\n");
      out.write("                \n");
      out.write("                $.ajax({\n");
      out.write("                    type: 'POST',\n");
      out.write("                    url: 'VentasC',\n");
      out.write("                    data: {json : obj, idcliente : $(\"#cbocliente\").val(),idempleado: $(\"#cboempleado\").val(),idtipodocumento: $(\"#cbotipodoc\").val(),txtnumerodoc: $(\"#txtnumero\").val(),Total : $(\"#txttotal\").val(),action : \"RegistrarVenta\"},\n");
      out.write("                    success: function (data) {\n");
      out.write("                    \n");
      out.write("                    top.$.unblockUI();\n");
      out.write("                    mostraravisoAceptar(\"Datos Registrados.\");                    \n");
      out.write("                    top.recargar();\n");
      out.write("                    }\n");
      out.write("                });                                                                                \n");
      out.write("                                \n");
      out.write("                \n");
      out.write("            });                                \n");
      out.write("            \n");
      out.write("        });\n");
      out.write("        \n");
      out.write("        ");
 String action = request.getParameter("action"); 
      out.write("\n");
      out.write("            ");
 String idventa = request.getParameter("idventa"); 
      out.write("\n");
      out.write("        var s=\"");
      out.print(action);
      out.write("\"; \n");
      out.write("        var idventa=\"");
      out.print(idventa);
      out.write("\";\n");
      out.write("        \n");
      out.write("        if (s == 'Consulta'){\n");
      out.write("            \n");
      out.write("                $.blockUI( { message: \"Cargando\"} );\n");
      out.write("                $.ajax({\n");
      out.write("                type :'GET',\n");
      out.write("                url :'VentasC?idventa=' + idventa + '&action=ConsultarVentaDentalle',\n");
      out.write("                headers : {\n");
      out.write("                    Accept : \"application/json; charset=utf-8\", \"Content-Type\" : \"application/json; charset=utf-8\"\n");
      out.write("                },\n");
      out.write("                success : function(result){ \n");
      out.write("                \n");
      out.write("                var listaVentas = $.parseJSON(result); \n");
      out.write("                var subtotal,igv,total;\n");
      out.write("                var tr='';\n");
      out.write("                subtotal = 0;\n");
      out.write("                \n");
      out.write("                for (var i=0;i < listaVentas.length ; i++){\n");
      out.write("                    \n");
      out.write("                    tr=tr + '<tr><td>' + listaVentas[i].idproducto + '</td><td>' + listaVentas[i].nombre + '</td><td>' + listaVentas[i].precio + '</td><td>' + listaVentas[i].cantidad + '</td><td>' + listaVentas[i].importe + '</td></tr>';   \n");
      out.write("                    subtotal = subtotal + listaVentas[i].importe;\n");
      out.write("                }\n");
      out.write("                \n");
      out.write("                igv = subtotal * 0.18;\n");
      out.write("                total =   subtotal + igv;  \n");
      out.write("                \n");
      out.write("                document.getElementById('txtsubtotal').value = parseFloat(subtotal).toFixed(2);\n");
      out.write("                document.getElementById('txtigv').value = parseFloat(igv).toFixed(2);\n");
      out.write("                document.getElementById('txttotal').value = parseFloat(total).toFixed(2);\n");
      out.write("                \n");
      out.write("                $('#idtabdetalle tr:last').after(tr).fadeIn();                                \n");
      out.write("                            \n");
      out.write("                top.$.unblockUI();                \n");
      out.write("                \n");
      out.write("                }\n");
      out.write("                });\n");
      out.write("        }; \n");
      out.write("        \n");
      out.write("    </script>\n");
      out.write("\n");
      out.write("</head>\n");
      out.write("\n");
      out.write("        <body style=\"padding-left: 12px;\">             \n");
      out.write("                             \n");
      out.write("    <form>\n");
      out.write("        \n");
      out.write("<table width=\"650px\" height=\"336\" border=\"0\">\n");
      out.write("  <tr>\n");
      out.write("    <td colspan=\"2\">\n");
      out.write("      <fieldset>\n");
      out.write("        <legend>Datos de Venta:</legend>        \n");
      out.write("        <table width=\"100%\" border=\"0\">\n");
      out.write("          <tr>\n");
      out.write("            <td>cliente</td>\n");
      out.write("            <td><select name=\"cbocliente\" id=\"cbocliente\">\n");
      out.write("            </select></td>\n");
      out.write("            <td>tipo doc</td>\n");
      out.write("            <td>\n");
      out.write("            <select name=\"cbotipodoc\" id=\"cbotipodoc\">\n");
      out.write("                <option value=\"1\">Factura</option>\n");
      out.write("                <option value=\"2\">Boleta</option>\n");
      out.write("            </select>\n");
      out.write("            </td>\n");
      out.write("          </tr>\n");
      out.write("          <tr>\n");
      out.write("            <td>empleado</td>\n");
      out.write("            <td><select name=\"cboempleado\" id=\"cboempleado\">\n");
      out.write("            </select></td>\n");
      out.write("            <td>Nro doc.</td>\n");
      out.write("            <td><input name=\"txtnumero\" id=\"txtnumero\" type=\"text\" value=\"00001\" /></td>\n");
      out.write("          </tr>\n");
      out.write("\t\t</table>          \n");
      out.write("      </fieldset>\n");
      out.write("    </td>\n");
      out.write("  </tr>\n");
      out.write("  <tr>\n");
      out.write("    <td colspan=\"2\">\n");
      out.write("    <fieldset>\n");
      out.write("    <legend>Datos de Producto:</legend>\n");
      out.write("    \n");
      out.write("        <table width=\"100%\" border=\"0\">\n");
      out.write("          <tr>\n");
      out.write("            <td>Producto</td>\n");
      out.write("            <td>Codigo</td>\n");
      out.write("            <td>Precio</td>\n");
      out.write("            <td>Cantidad</td>\n");
      out.write("            <td>Importe</td>\n");
      out.write("          </tr>\n");
      out.write("          <tr>\n");
      out.write("            <td><select name=\"cboproducto\" id=\"cboproducto\">\n");
      out.write("            </select></td>\n");
      out.write("            <td><input name=\"txtcodigo\" id=\"txtcodigo\" type=\"text\" width=\"80px\" style=\"width:95px\" readonly/></td>\n");
      out.write("            <td><input width=\"80px\" name=\"txtprecio\" id=\"txtprecio\" type=\"text\" style=\"width:95px\" readonly/></td>\n");
      out.write("            <td><input width=\"80px\" name=\"txtcantidad\" id=\"txtcantidad\" type=\"text\" style=\"width:95px\"/></td>\n");
      out.write("            <td><input width=\"80px\" name=\"txtimporte\" id=\"txtimporte\" type=\"text\" style=\"width:95px\" readonly/></td>\n");
      out.write("          </tr>\n");
      out.write("        </table>\n");
      out.write("\n");
      out.write("    </fieldset>\n");
      out.write("    </td>\n");
      out.write("  </tr>\n");
      out.write("  <tr>\n");
      out.write("    <td width=\"342\" height=\"106\" valign=\"top\">\n");
      out.write("    <fieldset>\n");
      out.write("    <legend>Detalle:</legend>\n");
      out.write("    <table width=\"100%\" border=\"1\" id=\"idtabdetalle\" style=\"border-collapse:collapse\" cellspacing=0>\n");
      out.write("      <tr>\n");
      out.write("        <td style=\"background-color: #0079b2; color: white\">codigo</td>\n");
      out.write("        <td style=\"background-color: #0079b2; color: white\">nombre de producto</td>\n");
      out.write("        <td style=\"background-color: #0079b2; color: white\">Precio</td>\n");
      out.write("        <td style=\"background-color: #0079b2; color: white\">Cantidad</td>\n");
      out.write("        <td style=\"background-color: #0079b2; color: white\">Importe</td>\n");
      out.write("      </tr>\n");
      out.write("    </table>\n");
      out.write("\n");
      out.write("   </fieldset>\n");
      out.write("    </td>\n");
      out.write("    <td width=\"93\" valign=\"top\">\n");
      out.write("    \n");
      out.write("        <table width=\"140\" border=\"0\">\n");
      out.write("          <tr>\n");
      out.write("            <td>\n");
      out.write("              <input type=\"button\" width=\"90px\" name=\"btnagregar\" id=\"btnagregar\" value=\"Agregar Detalle\" style=\"width:130px\"/>\n");
      out.write("            </td>\n");
      out.write("          </tr>\n");
      out.write("          <tr>\n");
      out.write("            <td><input width=\"90px\" type=\"button\" name=\"btnquitar\" id=\"btnquitar\" value=\"Quitar Detalle\" style=\"width:130px\"/></td>\n");
      out.write("          </tr>\n");
      out.write("          <tr>\n");
      out.write("            <td><input width=\"90px\" type=\"button\" name=\"btnregistrar\" id=\"btnregistrar\" value=\"Registrar  Venta\" style=\"width:130px\"/></td>\n");
      out.write("          </tr>\n");
      out.write("          <tr>\n");
      out.write("            <td><input width=\"90px\" type=\"button\" name=\"btncerrar\" id=\"btncerrar\" value=\"Cerrar\" style=\"width:80px\" style=\"width:130px\"/></td>\n");
      out.write("          </tr>\n");
      out.write("        </table>\n");
      out.write("        \n");
      out.write("    </td>\n");
      out.write("  </tr>\n");
      out.write("  <tr>\n");
      out.write("    <td><table width=\"100%\" border=\"0\">\n");
      out.write("      <tr>\n");
      out.write("        <td>Subtotal</td>\n");
      out.write("        <td><input width=\"90px\" name=\"txtsubtotal\" id=\"txtsubtotal\" type=\"text\" /></td>\n");
      out.write("        <td>Igv</td>\n");
      out.write("        <td><input name=\"txtigv\" width=\"90px\" id=\"txtigv\" type=\"text\" /></td>\n");
      out.write("        <td>Total</td>\n");
      out.write("        <td><input name=\"txttotal\" width=\"90px\" id=\"txttotal\" type=\"text\" /></td>\n");
      out.write("      </tr>\n");
      out.write("    </table></td>\n");
      out.write("    <td>&nbsp;</td>\n");
      out.write("  </tr>\n");
      out.write("</table>\n");
      out.write("\n");
      out.write("<div id=\"dialog-message\" title=\"Aviso\">\n");
      out.write("    <p>\n");
      out.write("        <span style=\"float:left; margin:0 7px 50px 0; padding-left: 3px;\"></span>    \n");
      out.write("    </p>\n");
      out.write("    <div id=\"aviso\"></div>\n");
      out.write("</div>        \n");
      out.write("\n");
      out.write("        \n");
      out.write("</form>\n");
      out.write("            \n");
      out.write("</div>\n");
      out.write("</center>\n");
      out.write("        \n");
      out.write(" <style type=\"text/css\">\n");
      out.write("     .ui-dialog .ui-dialog-content {padding: 0;}\n");
      out.write("     .ui-widget {font-family:Arial;}\n");
      out.write("     .ui-datepicker SELECT.ui-datepicker-year{width: 55px;}\n");
      out.write("     .ui-dialog .ui-dialog-titlebar{font-family:Verdana,Arial,sans-serif;font-size:13px;height: 13px;padding-top:0px;}\n");
      out.write("     .ui-dialog .ui-widget-header {background:#0160a4;border:1px solid #333;height:20px;}\n");
      out.write("     .ui-dialog .ui-dialog-title {width: 100%;text-align: center;color:#fff;padding-top:0.2em;font-size:13px}     \n");
      out.write(" </style>\n");
      out.write("</body>\n");
      out.write("</html>\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
